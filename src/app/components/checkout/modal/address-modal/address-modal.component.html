<nz-modal
  [nzStyle]="{ top: '20px' }"
  [(nzVisible)]="isVisible"
  nzTitle="Address"
  (nzOnCancel)="addressModalClose()"
>
  <div *nzModalContent>
    <ul>
      <li
        class="d-flex justify-content-between align-items-center delivery-detail-list"
        style="cursor: pointer"
        (click)="formModalOpen()"
      >
        <div class="d-flex align-items-center">
          <img width="30" src="assets\icons\map.png" />
          <p class="ms-2">Add new Location</p>
        </div>
        <i class="bi bi-chevron-right"></i>
      </li>
      <li class="d-flex flex-column delivery-detail-list">
        <strong>Saved Location</strong>
        @for (list of savedLocationList; track $index) { @if
        (savedLocationList.length > 0) {
        <div
          class="d-flex justify-content-between align-items-center w-100 mt-2"
        >
          <div class="d-flex align-items-center">
            <i class="bi bi-geo-alt-fill me-1" style="font-size: 20px"></i>
            <div>
              <p>{{ list?.Area }}</p>
              <span style="max-width: 400px">{{ list?.LocationAddress }}</span>
            </div>
          </div>
          <input
            type="radio"
            [value]="$index"
            [(ngModel)]="selectedLocationIndex"
            (change)="onLocationChange($index, list)"
          />
        </div>
        }@else {
        <div
          class="d-flex justify-content-center align-items-center w-100 mt-2"
        >
          <span>Empty</span>
        </div>
        } }
      </li>
    </ul>
  </div>
  <div *nzModalFooter>
    <button class="btn btn-primary" (click)="onSubmitChangedAddress()">
      Done
      <!-- @if (spinner) {
      <div class="spinner-grow spinner-grow-sm ms-2" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      } -->
    </button>
  </div>
</nz-modal>

<nz-modal
  [nzStyle]="{ top: '20px' }"
  [(nzVisible)]="isvisibleFormModal"
  nzTitle="Delivery Details"
  (nzOnCancel)="formModalClose()"
>
  <div *nzModalContent>
    <google-map
      width="100%"
      height="30vh"
      [center]="center"
      [zoom]="zoom"
      (mapClick)="onMapClick($event)"
    >
      <map-marker [options]="marked"></map-marker>
    </google-map>
    <h6 class="mt-2">{{ currentLocation?.address }}</h6>

    <form [formGroup]="addressForm" (ngSubmit)="onSubmit()">
      <div class="row mt-2">
        <div class="col-12">
          <nz-form-item>
            <nz-form-control [nzSpan]="24">
              <input
                nz-input
                formControlName="label"
                placeholder="Add a label (e.g. Home)*"
              />
            </nz-form-control>
          </nz-form-item>
        </div>
        <div class="col-12">
          <nz-form-item>
            <nz-form-control [nzSpan]="24">
              <input
                nz-input
                formControlName="appartment"
                placeholder="Apartment/Suite/Floor*"
              />
            </nz-form-control>
          </nz-form-item>
        </div>
        <div class="col-12">
          <nz-form-item>
            <nz-form-control [nzSpan]="24">
              <input
                nz-input
                formControlName="businessName"
                placeholder="Business or building name*"
              />
            </nz-form-control>
          </nz-form-item>
        </div>
        <div class="col-12">
          <nz-form-item>
            <nz-form-control [nzSpan]="24">
              <input nz-input formControlName="street" placeholder="Street" />
            </nz-form-control>
          </nz-form-item>
        </div>
        <div class="col-12">
          <nz-form-item>
            <nz-form-control [nzSpan]="24">
              <input nz-input formControlName="area" placeholder="Area*" />
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>
    </form>
  </div>
  <div *nzModalFooter>
    <button class="btn btn-primary" (click)="onSubmit()">
      Add Address
      <!-- @if (spinner) {
      <div class="spinner-grow spinner-grow-sm ms-2" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      } -->
    </button>
  </div>
</nz-modal>
